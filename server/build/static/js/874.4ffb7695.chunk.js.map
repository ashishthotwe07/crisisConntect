{"version":3,"file":"static/js/874.4ffb7695.chunk.js","mappings":"8JAGA,MA6CMA,EAAWC,IAAqC,IAApC,IAAEC,EAAG,KAAEC,EAAI,QAAEC,EAAO,OAAEC,GAAQJ,EA0B9C,OACEK,EAAAA,EAAAA,KAAA,MAAIC,UAAU,8CAA6CC,UACzDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,MAAKC,SAAA,EAClBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,kCAAiCC,SAAEL,KACjDG,EAAAA,EAAAA,KAAA,KAAGC,UAAU,6BAA4BC,SAAEJ,KAC3CE,EAAAA,EAAAA,KAAA,UACEI,QA/BmBC,UACzB,IAgBE,WAduBC,MAAM,+CAADC,OACqBX,GAC/C,CACEY,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChBC,cAAc,UAADH,OAAYI,aAAaC,QAAQ,WAEhDC,KAAMC,KAAKC,UAAU,CACnBhB,OAAmB,aAAXA,EAAwB,WAAa,gBAKrCiB,GACZ,MAAM,IAAIC,MAAM,iCAEpB,CAAE,MAAOC,GACPC,QAAQD,MAAM,gCAAiCA,EACjD,GAUMjB,UAAS,kCAAAM,OACI,aAAXR,EACI,kCACA,uCACHG,SAES,aAAXH,EAAwB,qBAAuB,yBAGjD,EAIT,EA3FkBqB,KAChB,MAAMC,GAASC,EAAAA,EAAAA,IAAG,0BACXC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,KAEvCC,EAAAA,EAAAA,YAAU,KACRC,GAAc,GACb,IAEH,MAAMA,EAAetB,UACnB,IAEE,MAAMuB,QAAiBtB,MACrB,oDACA,CACEG,QAAS,CACPC,cAAc,UAADH,OAAYI,aAAaC,QAAQ,aAIpD,IAAKgB,EAASZ,GACZ,MAAM,IAAIC,MAAM,2BAElB,MAAMY,QAAaD,EAASE,OAE5BN,EAAWK,EAAKA,KAClB,CAAE,MAAOX,GACPC,QAAQD,MAAM,0BAA2BA,EAC3C,GAOF,OAJAG,EAAOU,GAAG,uBAAwBC,IAChCL,GAAc,KAId3B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yBAAwBC,UACrCF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,uDAAsDC,SACjEqB,EAAQU,KAAI,CAACC,EAAQC,KACpBnC,EAAAA,EAAAA,KAACN,EAAQ,IAAiBwC,GAAXC,QAGf,C","sources":["pages/MyReports.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nconst MyReports = () => {\r\n  const socket = io(\"http://localhost:3000\");\r\n  const [reports, setReports] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchReports();\r\n  }, []);\r\n\r\n  const fetchReports = async () => {\r\n    try {\r\n      // Fetch data from your API endpoint\r\n      const response = await fetch(\r\n        \"http://localhost:3000/api/emergency/users/reports\",\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`, // Get token from localStorage\r\n          },\r\n        }\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch reports\");\r\n      }\r\n      const data = await response.json();\r\n\r\n      setReports(data.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching reports:\", error);\r\n    }\r\n  };\r\n\r\n  socket.on(\"updatedNotification\", (notification) => {\r\n    fetchReports();\r\n  });\r\n\r\n  return (\r\n    <div className=\"container mx-auto mt-8\">\r\n      <ul className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n        {reports.map((report, index) => (\r\n          <ListItem key={index} {...report} />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ListItem = ({ _id, type, address, status }) => {\r\n  const handleResolveClick = async () => {\r\n    try {\r\n      // Send PUT request to update report status\r\n      const response = await fetch(\r\n        `http://localhost:3000/api/emergency/reports/${_id}`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n          },\r\n          body: JSON.stringify({\r\n            status: status === \"resolved\" ? \"Reported\" : \"resolved\",\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to update report status\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating report status:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <li className=\"border border-gray-200 rounded-md shadow-md\">\r\n      <div className=\"p-4\">\r\n        <h3 className=\"text-lg font-bold text-gray-900\">{type}</h3>\r\n        <p className=\"mt-2 text-sm text-gray-600\">{address}</p>\r\n        <button\r\n          onClick={handleResolveClick}\r\n          className={`block mt-4 text-sm font-medium ${\r\n            status === \"resolved\"\r\n              ? \"text-red-600 hover:text-red-500\"\r\n              : \"text-green-600 hover:text-green-500\"\r\n          }`}\r\n        >\r\n          {status === \"resolved\" ? \"Mark As Unresolved\" : \"Mark As Resolved\"}\r\n        </button>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default MyReports;\r\n"],"names":["ListItem","_ref","_id","type","address","status","_jsx","className","children","_jsxs","onClick","async","fetch","concat","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","ok","Error","error","console","MyReports","socket","io","reports","setReports","useState","useEffect","fetchReports","response","data","json","on","notification","map","report","index"],"sourceRoot":""}